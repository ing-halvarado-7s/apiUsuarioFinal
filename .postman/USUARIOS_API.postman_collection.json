{
	"info": {
		"_postman_id": "eb417a0f-dc19-4bb7-9213-3e799a22a863",
		"name": "USUARIOS_API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Autenticación",
			"item": [
				{
					"name": "Iniciar Sesión",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f04fc6f2-95b1-43ec-bcad-a4ece92be12f",
								"exec": [
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"Response should be JSON\", function () {",
									"    pm.response.to.be.json;",
									"});",
									"",
									"pm.test(\"Response should contains token\", function () {",
									"    pm.response.to.have.jsonBody(\"token\");",
									"    var json = JSON.parse(responseBody);",
									"    postman.setEnvironmentVariable(\"token\", `Bearer ${json.token}`);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "email",
									"value": "ing.halvarado.7s@gmail.com",
									"type": "text"
								},
								{
									"key": "password",
									"value": "Venezuela2021",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://127.0.0.1:8000/api/iniciarsesion",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "8000",
							"path": [
								"api",
								"iniciarsesion"
							]
						},
						"description": "El inicio de sesión es usado para autenticar a un usuario mediante un email y un password registrado en la base de datos.\n\nEl email y el password son agregados en la pestaña body en la opción form data.\n\nEl inicio de sesión devuelve un token que debe ser usado en todos los endpoints que solo funcionan cuando el usuario está autenticado.\n\nLos endpoints que necesitan token para funcionar son:\n*Crear usuario.\n*Listar usuario.\n*Actualizar usuario.\n*Borrar usuario.\n*Mostrar detalle de un usuario.\n*Asignar rol a usuario.\n*Agregar permiso a rol.\n*Quitar permiso a rol."
					},
					"response": []
				},
				{
					"name": "Cerrar Sesión",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8a480abc-3a1d-4912-ad6e-c3828a201dd9",
								"exec": [
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"Response should be JSON\", function () {",
									"    pm.response.to.be.json;",
									"});",
									"",
									"pm.test(\"Response should contains token\", function () {",
									"    pm.response.to.have.jsonBody(\"status\");",
									"    var json = JSON.parse(responseBody);",
									"    postman.setEnvironmentVariable(\"token\", \"\");",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://127.0.0.1:8000/api/cerrarsesion",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "8000",
							"path": [
								"api",
								"cerrarsesion"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Usuarios",
			"item": [
				{
					"name": "Crear Usuario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "Moi Moi",
									"type": "text"
								},
								{
									"key": "password",
									"value": "Venezuela2021",
									"type": "text"
								},
								{
									"key": "password_confirmation",
									"value": "Venezuela2021",
									"type": "text"
								},
								{
									"key": "email",
									"value": "moimoi@gmail.com11",
									"type": "text"
								},
								{
									"key": "edad",
									"value": "40",
									"type": "text"
								},
								{
									"key": "fecha_nacimiento",
									"value": "1980-08-06",
									"type": "text"
								},
								{
									"key": "sexo",
									"value": "F",
									"type": "text"
								},
								{
									"key": "dni",
									"value": "20202023",
									"type": "text"
								},
								{
									"key": "direccion",
									"value": "Chivacoa",
									"type": "text"
								},
								{
									"key": "pais",
									"value": "Venezuela",
									"type": "text"
								},
								{
									"key": "telefono",
									"value": "",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://127.0.0.1:8000/api/usuarios/crear",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "8000",
							"path": [
								"api",
								"usuarios",
								"crear"
							]
						},
						"description": "Esta función permite crear un registro de un usuario nuevo, es necesario ingresar todos los datos excepto el teléfono que puede estar vacío. Para hacer la prueba se pueden usar los mismos datos que se encuentran en la pestaña body en la opción form-data, excepto el email y el dni que son datos únicos y se deben cambiar cuando sean usados por primera vez. \n\nEl email y el password del usuario creado son los que se usan para iniciar sesión.\n\nAntes de ejecutar la función es necesario agregar el token que devuelve el inicio de sesión, dicho valor se debe agregar en la pestaña \"autorización\", en el tipo \"Bearer to\" en la caja de texto \"Token\".\n\nLos datos son almacenados en la tabla users, si la ejecución de la función resulta exitosa se muestran los datos del registro creado y  un valor status en true, y si no se pudo registrar devuelve status en false.\n\n"
					},
					"response": []
				},
				{
					"name": "Listar Usuarios",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://127.0.0.1:8000/api/usuarios/listar",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "8000",
							"path": [
								"api",
								"usuarios",
								"listar"
							]
						},
						"description": "Esta función permite listar todos los usuarios registrados en la base de datos.\n\nAntes de ejecutar la función es necesario agregar el token que devuelve el inicio de sesión, dicho valor se debe agregar en la pestaña \"autorización\", en el tipo \"Bearer to\" en la caja de texto \"Token\".\n\nSi la ejecución de la función resulta exitosa se muestran todos los registros de usuario que se encuentran en la base de datos y  un valor status en true, y si no se pudo listar devuelve status en false."
					},
					"response": []
				},
				{
					"name": "Actualizar Usuario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "Moi moi",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://127.0.0.1:8000/api/usuarios/actualizar/4",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "8000",
							"path": [
								"api",
								"usuarios",
								"actualizar",
								"4"
							]
						},
						"description": "Esta función permite editar los datos del registro de un usuario en particular mediante su id. Además se necesitan los nuevos valores de los datos que se quieran modificar. Para el ejemplo solo se modifica el nombre del usuario.\n\nAntes de ejecutar la función es necesario agregar el token que devuelve el inicio de sesión, dicho valor se debe agregar en la pestaña \"autorización\", en el tipo \"Bearer to\" en la caja de texto \"Token\".\n\nLos datos son almacenados en la tabla users, si la ejecución de la función resulta exitosa se muestran los datos del registro modificado y un valor status en true, y si no se pudo registrar devuelve status en false."
					},
					"response": []
				},
				{
					"name": "Borrar Usuario",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://127.0.0.1:8000/api/usuarios/eliminar/8",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "8000",
							"path": [
								"api",
								"usuarios",
								"eliminar",
								"8"
							]
						},
						"description": "Esta función permite eliminar los datos del registro de un usuario en particular mediante su id. \n\nAntes de ejecutar la función es necesario agregar el token que devuelve el inicio de sesión, dicho valor se debe agregar en la pestaña \"autorización\", en el tipo \"Bearer to\" en la caja de texto \"Token\".\n\nLos datos son eliminados de la tabla users, si la ejecución de la función resulta exitosa se muestra un valor status en true, y si no se pudo registrar devuelve status en false."
					},
					"response": []
				},
				{
					"name": "Mostrar Detalle de Usuario",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://127.0.0.1:8000/api/usuarios/mostrardetalle/3",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "8000",
							"path": [
								"api",
								"usuarios",
								"mostrardetalle",
								"3"
							]
						},
						"description": "Esta función permite lista los datos del usuario cuyo id coincida con el id enviado mediante la url.\n\nAntes de ejecutar la función es necesario agregar el token que devuelve el inicio de sesión, dicho valor se debe agregar en la pestaña \"autorización\", en el tipo \"Bearer to\" en la caja de texto \"Token\".\n\nSi la ejecución de la función resulta exitosa se muestran todos los datos del usuario que se encuentran en la base de datos y un valor status en true, y si no se pudo listar devuelve status en false."
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Roles",
			"item": [
				{
					"name": "Asignar Rol a Usuario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "usuarioId",
									"value": "9",
									"type": "text"
								},
								{
									"key": "nombreRol",
									"value": "Usuario",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://127.0.0.1:8000/api/roles/asignarol",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "8000",
							"path": [
								"api",
								"roles",
								"asignarol"
							]
						}
					},
					"response": []
				},
				{
					"name": "Quitar Rol a Usuario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "usuarioId",
									"value": "9",
									"type": "text"
								},
								{
									"key": "nombreRol",
									"value": "Usuario",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://127.0.0.1:8000/api/roles/quitarrol",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "8000",
							"path": [
								"api",
								"roles",
								"quitarrol"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Permisos",
			"item": [
				{
					"name": "Agregar Permiso A Rol",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "nombreRol",
									"value": "admin",
									"type": "text"
								},
								{
									"key": "nombrePermiso",
									"value": "eliminar",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://127.0.0.1:8000/api/agregarpermisorol",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "8000",
							"path": [
								"api",
								"agregarpermisorol"
							]
						}
					},
					"response": []
				},
				{
					"name": "Quitar Permiso A Rol",
					"request": {
						"method": "POST",
						"header": [
							{
								"warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "nombreRol",
									"value": "usuario",
									"type": "text"
								},
								{
									"key": "nombrePermiso",
									"value": "eliminar",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://127.0.0.1:8000/api/quitarpermisorol",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "8000",
							"path": [
								"api",
								"quitarpermisorol"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"protocolProfileBehavior": {}
}